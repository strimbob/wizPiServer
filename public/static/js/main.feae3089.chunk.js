(this.webpackJsonpjangle=this.webpackJsonpjangle||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var r="token",c="project"},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),c=n.n(r),a=n(10),o=n(14),i=n(33),s=n(34),u="token",l=function e(t){var n=this;Object(o.a)(this,e),this.setToken=function(e){localStorage.setItem(u,e)},this.resetPassword=function(e){return new Promise((function(t,r){n.auth.changePassword({connection:n.getRealm(),email:e},(function(e,n){e&&(console.error("error",e),r("Error: ".concat(e.description))),n&&(console.log("error",n),t(n))}))}))},this.getRealm=function(){return"Username-Password-Authentication"},this.login=function(e,t){var r={username:e,password:t,realm:n.getRealm()};return new Promise((function(e,t){n.authClient.login(r,(function(r,c){r&&t(r),c&&c.accessToken&&n.handleAuthResult(e,c)}))}))},this.handleAuthResult=function(e,t){console.log("logged in!",t),n.setToken(t.accessToken);var r=n.getTenants();1===r.length&&n.setTenant(r[0]),e(r)},this.isAuthenticated=function(){try{var e=Object(s.a)(localStorage.getItem(u));return!!e&&e.exp>Date.now()/1e3}catch(t){return console.log("get new token"),!1}},this.tenantSelected=function(){try{return localStorage.hasOwnProperty("tenant")}catch(e){return console.error(e),!1}},this.getTenants=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),this.setTenant=function(e){n.tenant=e,localStorage.setItem("tenant",e)},this.getTenant=function(){try{return n.tenant||localStorage.getItem("tenant")}catch(e){return null}},this.domain=t||"http://localhost:8080";var r=new i.a.WebAuth({clientID:"Sdvn7VM9NdXOlbZqiOjQuhsAe48nnlNu",domain:"solidcake.eu.auth0.com",audience:"https://solidcake.eu.auth0.com/api/v2/",scope:"openid profile",responseType:"token id_token"});this.authClient=r.client,this.auth=r,this.tenant=null}},26:function(e,t,n){"use strict";var r=n(5),c=n.n(r),a=n(10),o=n(17),i=n(1),s=n(0),u=n(15),l=n(3),d=n(11),h=function(e){var t=e.id,n=e._key,r=e.disable,c=e.value,a=e.onClick,o=e.onChange,u=e.className,l=void 0===u?"":u,h=e.placeholder,p=void 0===h?"":h,j=e.onKeyPress,b=void 0===j?void 0:j,f=e._ref,g=void 0===f?null:f,v=e.isUpdating,O=void 0!==v&&v,m=e.didUpdateFail,x=void 0!==m&&m,w=e.errorMessage,y=e.type,k=void 0===y?"text":y;return Object(i.jsxs)(s.Fragment,{children:[Object(i.jsx)("input",{ref:g,id:t,className:"SD-InputText ".concat(l," ").concat(O?"updating":""," ").concat(x?"failed":""),placeholder:p,disabled:r,type:k,value:c||"",onChange:o,onClick:a,onBlur:function(e){return o(Object(d.a)(Object(d.a)({},e),{},{type:"onBlur"}))},onKeyPress:b,autoComplete:"off"},"SD-textKey__".concat(n)),w&&Object(i.jsx)(s.Fragment,{children:Object(i.jsx)("div",{className:"SD-Label",children:"".concat(w)})})]})},p=new(n(16).a),j="loginName",b="loginPassword",f="loginSubmit";t.a=function(){var e=Object(s.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],d=Object(s.useState)(null),g=Object(o.a)(d,2),v=g[0],O=g[1],m=Object(s.useState)(null),x=Object(o.a)(m,2),w=x[0],y=x[1],k=Object(l.g)(),T=function(){var e=Object(a.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.currentTarget.id,e.t0=a,e.next=e.t0===j?4:e.t0===b?6:e.t0===f?8:19;break;case 4:return r(t.currentTarget.value),e.abrupt("break",21);case 6:return O(t.currentTarget.value),e.abrupt("break",21);case 8:return e.prev=8,e.next=11,p.login(n,v);case 11:localStorage.setItem(u.b,"xylophone"),k.push("/"),e.next=18;break;case 15:e.prev=15,e.t1=e.catch(8),y(e.t1.description);case 18:return e.abrupt("break",21);case 19:return console.log("id error"),e.abrupt("break",21);case 21:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"loginPage-wrapper",children:Object(i.jsx)("div",{className:"login",children:Object(i.jsx)("form",{children:Object(i.jsxs)("div",{className:"login-inputs",children:[Object(i.jsx)("div",{className:"login-title",children:"Welcome to stomp "}),Object(i.jsx)(h,{id:j,_key:j,value:n,onClick:T,onChange:T,className:"login-input",placeholder:"User Name",type:"text"}),Object(i.jsx)(h,{id:b,_key:b,value:v,onClick:T,onChange:T,className:"login-input",placeholder:"User Password",type:"password"}),w&&Object(i.jsx)("div",{className:"login-error",children:w}),Object(i.jsx)("div",{className:"login-submit",id:f,onClick:T,children:"login"})]})})})})}},38:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n.n(r),a=n(10),o=n(1),i=n(0),s=n(12),u=(n(26),n(14)),l=n(11),d={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD"},h={Accept:"application/json","Content-Type":"application/json"},p=Object.keys(d).reduce((function(e,t){return"".concat(e,", ").concat(t)}),"").replace(",",""),j=n(15);function b(e){return function(e){return x.apply(this,arguments)}(e,{},null,d.GET,h)}var f=function(e){return e.status>=200&&e.status<300},g=function(e){return new Error(e)},v=function(e){return e&&e.message?new Error(e.message):new Error("Unknown fetch error")};function O(e){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(c.a.mark((function e(t){var n,r,a,o,i,s,u,h,b,O=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.length>1&&void 0!==O[1]?O[1]:{},r=O.length>2&&void 0!==O[2]?O[2]:null,a=O.length>3&&void 0!==O[3]?O[3]:d.GET,o=O.length>4?O[4]:void 0,a!==d.POST&&a!==d.PUT||r&&"string"!==typeof r&&(r=JSON.stringify(r)),i=(i=localStorage.getItem(j.a))||"",s=Object(l.a)({method:a,headers:Object(l.a)({Authorization:"Bearer "+i,"Access-Control-Allow-Methods":p},o),body:r},n),e.prev=8,e.next=11,fetch(t,s);case 11:if(u=e.sent,!f(u)){e.next=16;break}return e.abrupt("return",u);case 16:return e.next=18,u.json();case 18:throw h=e.sent,b=g(h.message?h.message:u.status),g(b);case 21:e.next=27;break;case 23:throw e.prev=23,e.t0=e.catch(8),console.trace(e.t0),v(e.t0);case 27:case"end":return e.stop()}}),e,null,[[8,23]])})))).apply(this,arguments)}function x(){return(x=Object(a.a)(c.a.mark((function e(t){var n,r,a,o,i,s,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=u.length>2&&void 0!==u[2]?u[2]:null,a=u.length>3&&void 0!==u[3]?u[3]:d.GET,o=u.length>4?u[4]:void 0,e.next=6,O(t,n,r,a,o);case 6:return i=e.sent,e.next=9,i.json();case 9:return s=e.sent,e.next=12,s;case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){return localStorage.getItem(j.b)},y=function(){return"http://localhost:5000"},k=function(e,t){return b("".concat(function(){var e=w(),t=y();return"".concat(t,"/v1/").concat(e)}(),"/").concat(e,"/").concat(t))},T=function e(t){Object(u.a)(this,e),this.objectType=t,this.GET=function(e){return function(t){return k(e,t)}}(t)},S=new function e(){Object(u.a)(this,e),this.search=new T("search/midi"),this.midi=new T("midi")};new(n(16).a),t.default=Object(s.b)((function(e){return{midi:e.midi}}))((function(e){var t=e.midi,n=e.dispatch;return Object(i.useEffect)((function(){console.log(t),n(function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.search.GET("bill");case 3:return r=e.sent,console.log(r,"events"),e.next=8,S.midi.GET("~midi~lil-nas-x-ft-billy-ray-cyrus~old-town-road-remix");case 8:a=e.sent,console.log("events","events",r,a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}())}),[t]),Object(o.jsx)("div",{children:"loginedin"})}))},49:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),o=n(20),i=n.n(o),s=n(12),u=n(13),l=n(31),d="LOGOUT",h=n(14),p=n(39),j=n(37),b=n(32),f=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return n}(Object(b.a)({track:null,autoSugget:null,url:null})),g=Object(u.c)({midi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return new f;default:return e}}}),v=[l.a],O=Object(u.d)(g,u.a.apply(void 0,v)),m=(n(49),n(18)),x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,73)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))},w=n(38),y=n(26),k=n(3),T=Object(s.b)()((function(e){var t=e.dispatch;return Object(c.useEffect)((function(){t({type:d}),localStorage.clear()}),[]),Object(r.jsx)(k.a,{to:"/"})})),S=n(11),E=n(17),N=new(n(16).a);var P,C,A=n(22),I=n(35),D=function(e){return Object(r.jsx)(c.Fragment,{children:Object(r.jsx)(I.a,{className:"app-Wrapper",children:Object(A.a)(e.route.routes)})})},U=n(36),F=n.n(U),G=function(){return Object(r.jsx)("div",{className:"spinner",children:Object(r.jsx)(F.a,{type:"Oval",color:"#3e96f5"})})},L=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,38))})),_=[{component:D,routes:[{path:"/clear",exact:!0,component:T},{path:"/login",exact:!0,component:y.a},{path:"/other",exact:!0,component:(P=L,function(){return Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)("div",{className:"lazyLoadWrapper",children:Object(r.jsx)("div",{className:"lazyLoad",children:Object(r.jsx)(G,{})})}),children:Object(r.jsx)(P,Object(S.a)({},C))})})},{path:"/**",exact:!0,component:function(e){var t=e.Component;return function(e){var n=Object(c.useState)(N.isAuthenticated()),a=Object(E.a)(n,2),o=a[0],i=a[1],u=Object(s.c)();return Object(c.useEffect)((function(){N.isAuthenticated()?console.log("logged in"):(console.log("logged out"),u({type:d})),i(N.isAuthenticated())}),[N.isAuthenticated()]),o?Object(r.jsx)(c.Fragment,{children:Object(r.jsx)(t,Object(S.a)({},e))}):Object(r.jsx)(k.a,{to:"/login"})}}({Component:w.default})}]}];i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(s.a,{store:O,children:Object(r.jsx)(m.a,{basename:"",children:Object(A.a)(_)})})}),document.getElementById("root")),x()}},[[72,1,2]]]);
//# sourceMappingURL=main.feae3089.chunk.js.map